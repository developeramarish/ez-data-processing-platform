<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EZ Platform - Observability Stack</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            background: linear-gradient(90deg, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #a5b4fc;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        .diagram-container {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        svg {
            width: 100%;
            height: auto;
            display: block;
        }
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .nav-links a {
            color: #c084fc;
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid #c084fc;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .nav-links a:hover {
            background: #c084fc;
            color: #1e1b4b;
        }
        .endpoints {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }
        .endpoint-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .endpoint-card h3 {
            color: #c084fc;
            font-size: 1rem;
            margin-bottom: 8px;
        }
        .endpoint-card code {
            color: #a5b4fc;
            font-size: 0.85rem;
            background: rgba(0,0,0,0.3);
            padding: 3px 8px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Observability Stack</h1>
        <p class="subtitle">Metrics ‚Ä¢ Traces ‚Ä¢ Logs | Full OpenTelemetry Integration</p>

        <div class="diagram-container">
            <svg viewBox="0 0 1200 820" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="otelGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f97316"/>
                        <stop offset="100%" style="stop-color:#ea580c"/>
                    </linearGradient>
                    <linearGradient id="promGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ef4444"/>
                        <stop offset="100%" style="stop-color:#dc2626"/>
                    </linearGradient>
                    <linearGradient id="grafanaGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f59e0b"/>
                        <stop offset="100%" style="stop-color:#d97706"/>
                    </linearGradient>
                    <linearGradient id="jaegerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#06b6d4"/>
                        <stop offset="100%" style="stop-color:#0891b2"/>
                    </linearGradient>
                    <linearGradient id="elasticGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#10b981"/>
                        <stop offset="100%" style="stop-color:#059669"/>
                    </linearGradient>
                    <linearGradient id="fluentGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6"/>
                        <stop offset="100%" style="stop-color:#2563eb"/>
                    </linearGradient>
                    <linearGradient id="serviceGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8b5cf6"/>
                        <stop offset="100%" style="stop-color:#7c3aed"/>
                    </linearGradient>
                    <filter id="shadow">
                        <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.4"/>
                    </filter>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#f97316"/>
                    </marker>
                    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
                    </marker>
                    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
                    </marker>
                    <marker id="arrowCyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#06b6d4"/>
                    </marker>
                    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
                    </marker>
                </defs>

                <!-- Title -->
                <text x="600" y="35" text-anchor="middle" fill="#e879f9" font-size="18" font-weight="bold">OPENTELEMETRY OBSERVABILITY ARCHITECTURE</text>

                <!-- MICROSERVICES LAYER -->
                <rect x="50" y="60" width="1100" height="120" rx="12" fill="url(#serviceGrad)" filter="url(#shadow)" opacity="0.9"/>
                <text x="100" y="85" fill="white" font-size="14" font-weight="bold">MICROSERVICES (9 Services)</text>

                <!-- Service boxes -->
                <g>
                    <rect x="70" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="120" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">FileDiscovery</text>
                    <text x="120" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5007</text>
                    <text x="120" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="180" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="230" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">FileProcessor</text>
                    <text x="230" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5008</text>
                    <text x="230" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="290" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="340" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">Validation</text>
                    <text x="340" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5003</text>
                    <text x="340" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="400" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="450" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">Output</text>
                    <text x="450" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5009</text>
                    <text x="450" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="510" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="560" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">Scheduling</text>
                    <text x="560" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5004</text>
                    <text x="560" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="620" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="670" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">DataSource</text>
                    <text x="670" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5001</text>
                    <text x="670" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="730" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="780" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">MetricsConfig</text>
                    <text x="780" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5002</text>
                    <text x="780" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="840" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="890" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">InvalidRecords</text>
                    <text x="890" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 5006</text>
                    <text x="890" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>
                <g>
                    <rect x="950" y="100" width="100" height="65" rx="6" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                    <text x="1000" y="120" text-anchor="middle" fill="white" font-size="9" font-weight="bold">Frontend</text>
                    <text x="1000" y="135" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">Port 3000</text>
                    <text x="1000" y="155" text-anchor="middle" fill="#fbbf24" font-size="8">üìä Metrics</text>
                </g>

                <!-- Telemetry arrows -->
                <path d="M 600 185 L 600 215" stroke="#f97316" stroke-width="3" marker-end="url(#arrowOrange)"/>
                <text x="620" y="205" fill="#fdba74" font-size="10">OTLP (gRPC/HTTP)</text>

                <!-- OTEL COLLECTOR -->
                <rect x="350" y="225" width="500" height="100" rx="12" fill="url(#otelGrad)" filter="url(#shadow)"/>
                <text x="600" y="260" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üîÑ OPENTELEMETRY COLLECTOR</text>
                <text x="600" y="285" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="12">Central Telemetry Hub | Ports: 4317 (gRPC) / 4318 (HTTP)</text>
                <text x="600" y="310" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="11">Receivers ‚Üí Processors ‚Üí Exporters</text>

                <!-- Arrows from OTEL to backends -->
                <path d="M 420 330 L 200 400" stroke="#ef4444" stroke-width="3" marker-end="url(#arrowRed)"/>
                <path d="M 600 330 L 600 400" stroke="#06b6d4" stroke-width="3" marker-end="url(#arrowCyan)"/>
                <path d="M 780 330 L 1000 400" stroke="#10b981" stroke-width="3" marker-end="url(#arrowGreen)"/>

                <!-- Labels on arrows -->
                <text x="280" y="365" fill="#fca5a5" font-size="10" transform="rotate(-25 280 365)">Metrics</text>
                <text x="620" y="370" fill="#67e8f9" font-size="10">Traces</text>
                <text x="890" y="365" fill="#6ee7b7" font-size="10" transform="rotate(25 890 365)">Logs</text>

                <!-- PROMETHEUS (Dual) -->
                <rect x="50" y="410" width="300" height="160" rx="12" fill="url(#promGrad)" filter="url(#shadow)"/>
                <text x="200" y="440" text-anchor="middle" fill="white" font-size="14" font-weight="bold">üìà PROMETHEUS (Dual Instance)</text>

                <!-- System Prometheus -->
                <rect x="70" y="455" width="125" height="100" rx="8" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                <text x="132" y="480" text-anchor="middle" fill="white" font-size="11" font-weight="bold">System</text>
                <text x="132" y="498" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Port: 9090</text>
                <line x1="85" y1="510" x2="180" y2="510" stroke="rgba(255,255,255,0.3)"/>
                <text x="132" y="528" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">Infrastructure</text>
                <text x="132" y="543" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">K8s Metrics</text>

                <!-- Business Prometheus -->
                <rect x="205" y="455" width="125" height="100" rx="8" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                <text x="267" y="480" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Business</text>
                <text x="267" y="498" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Port: 9091</text>
                <line x1="220" y1="510" x2="315" y2="510" stroke="rgba(255,255,255,0.3)"/>
                <text x="267" y="528" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">Business KPIs</text>
                <text x="267" y="543" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">Custom Metrics</text>

                <!-- JAEGER -->
                <rect x="450" y="410" width="300" height="160" rx="12" fill="url(#jaegerGrad)" filter="url(#shadow)"/>
                <text x="600" y="440" text-anchor="middle" fill="white" font-size="14" font-weight="bold">üîç JAEGER</text>
                <text x="600" y="460" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Distributed Tracing</text>

                <rect x="470" y="475" width="260" height="80" rx="8" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                <text x="600" y="500" text-anchor="middle" fill="white" font-size="11">UI Port: 16686</text>
                <text x="600" y="520" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Collector: 4317</text>
                <line x1="490" y1="532" x2="710" y2="532" stroke="rgba(255,255,255,0.3)"/>
                <text x="600" y="548" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">Span Analysis | Service Maps | Latency Histograms</text>

                <!-- ELASTICSEARCH -->
                <rect x="850" y="410" width="300" height="160" rx="12" fill="url(#elasticGrad)" filter="url(#shadow)"/>
                <text x="1000" y="440" text-anchor="middle" fill="white" font-size="14" font-weight="bold">üîé ELASTICSEARCH</text>
                <text x="1000" y="460" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Centralized Logging</text>

                <rect x="870" y="475" width="260" height="80" rx="8" fill="rgba(255,255,255,0.15)" stroke="rgba(255,255,255,0.3)"/>
                <text x="1000" y="500" text-anchor="middle" fill="white" font-size="11">Port: 9200</text>
                <line x1="890" y1="515" x2="1110" y2="515" stroke="rgba(255,255,255,0.3)"/>
                <text x="1000" y="533" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">Logs Index</text>
                <text x="1000" y="548" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">Jaeger Spans Backend</text>

                <!-- FLUENT BIT -->
                <rect x="850" y="620" width="300" height="70" rx="10" fill="url(#fluentGrad)" filter="url(#shadow)"/>
                <text x="1000" y="650" text-anchor="middle" fill="white" font-size="13" font-weight="bold">üìù FLUENT BIT (DaemonSet)</text>
                <text x="1000" y="675" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Container Logs | K8s Enrichment | JSON Parsing</text>

                <!-- Arrow from Fluent Bit to Elasticsearch (pointing UP) -->
                <path d="M 1000 620 L 1000 575" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowGreen)"/>

                <!-- GRAFANA -->
                <rect x="250" y="620" width="500" height="130" rx="12" fill="url(#grafanaGrad)" filter="url(#shadow)"/>
                <text x="500" y="650" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üìä GRAFANA</text>
                <text x="500" y="675" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="12">Visualization & Dashboards | Port: 3001</text>

                <!-- Dashboard boxes -->
                <rect x="280" y="690" width="130" height="45" rx="6" fill="rgba(255,255,255,0.2)"/>
                <text x="345" y="712" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Business</text>
                <text x="345" y="727" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Metrics</text>

                <rect x="430" y="690" width="130" height="45" rx="6" fill="rgba(255,255,255,0.2)"/>
                <text x="495" y="712" text-anchor="middle" fill="white" font-size="10" font-weight="bold">Infrastructure</text>
                <text x="495" y="727" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Health</text>

                <rect x="580" y="690" width="130" height="45" rx="6" fill="rgba(255,255,255,0.2)"/>
                <text x="645" y="712" text-anchor="middle" fill="white" font-size="10" font-weight="bold">RabbitMQ</text>
                <text x="645" y="727" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="9">Queues</text>

                <!-- Arrows from Prometheus to Grafana -->
                <path d="M 200 575 L 350 620" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,3"/>
                <path d="M 600 575 L 500 620" stroke="#f59e0b" stroke-width="2" stroke-dasharray="5,3"/>

                <!-- Business Metrics Box -->
                <rect x="50" y="620" width="180" height="130" rx="10" fill="rgba(239,68,68,0.2)" stroke="rgba(239,68,68,0.4)"/>
                <text x="140" y="645" text-anchor="middle" fill="#fca5a5" font-size="11" font-weight="bold">BUSINESS METRICS</text>
                <text x="60" y="670" fill="#fca5a5" font-size="9">‚Ä¢ records_processed_total</text>
                <text x="60" y="688" fill="#fca5a5" font-size="9">‚Ä¢ invalid_records_total</text>
                <text x="60" y="706" fill="#fca5a5" font-size="9">‚Ä¢ files_processed_total</text>
                <text x="60" y="724" fill="#fca5a5" font-size="9">‚Ä¢ processing_duration</text>
                <text x="60" y="742" fill="#fca5a5" font-size="9">‚Ä¢ end_to_end_latency</text>

                <!-- Legend -->
                <rect x="50" y="770" width="1100" height="35" rx="8" fill="rgba(255,255,255,0.05)"/>
                <text x="70" y="792" fill="#f97316" font-size="11">‚óè</text>
                <text x="85" y="792" fill="#a5b4fc" font-size="10">OTEL Collector</text>
                <text x="200" y="792" fill="#ef4444" font-size="11">‚óè</text>
                <text x="215" y="792" fill="#a5b4fc" font-size="10">Prometheus</text>
                <text x="320" y="792" fill="#06b6d4" font-size="11">‚óè</text>
                <text x="335" y="792" fill="#a5b4fc" font-size="10">Jaeger</text>
                <text x="420" y="792" fill="#10b981" font-size="11">‚óè</text>
                <text x="435" y="792" fill="#a5b4fc" font-size="10">Elasticsearch</text>
                <text x="560" y="792" fill="#3b82f6" font-size="11">‚óè</text>
                <text x="575" y="792" fill="#a5b4fc" font-size="10">Fluent Bit</text>
                <text x="680" y="792" fill="#f59e0b" font-size="11">‚óè</text>
                <text x="695" y="792" fill="#a5b4fc" font-size="10">Grafana</text>

                <text x="850" y="792" fill="#c4b5fd" font-size="10">Namespace: ez-platform | Full Stack Observability</text>
            </svg>
        </div>

        <div class="endpoints">
            <div class="endpoint-card">
                <h3>üìä Grafana</h3>
                <code>localhost:3001</code>
                <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 5px;">admin / admin</p>
            </div>
            <div class="endpoint-card">
                <h3>üîç Jaeger UI</h3>
                <code>localhost:16686</code>
                <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 5px;">Trace Explorer</p>
            </div>
            <div class="endpoint-card">
                <h3>üìà Prometheus System</h3>
                <code>localhost:9090</code>
                <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 5px;">Infrastructure Metrics</p>
            </div>
            <div class="endpoint-card">
                <h3>üìà Prometheus Business</h3>
                <code>localhost:9091</code>
                <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 5px;">Business KPIs</p>
            </div>
            <div class="endpoint-card">
                <h3>üîé Elasticsearch</h3>
                <code>localhost:9200</code>
                <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 5px;">Logs & Spans</p>
            </div>
            <div class="endpoint-card">
                <h3>üîÑ OTEL Collector</h3>
                <code>localhost:4317 / 4318</code>
                <p style="color: #94a3b8; font-size: 0.8rem; margin-top: 5px;">gRPC / HTTP</p>
            </div>
        </div>

        <div class="nav-links">
            <a href="index.html">‚Üê All Diagrams</a>
            <a href="architecture-overview.html">‚Üê Architecture Overview</a>
            <a href="data-pipeline.html">‚Üê Data Pipeline</a>
        </div>
    </div>
</body>
</html>
