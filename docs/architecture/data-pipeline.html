<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EZ Platform - Data Pipeline Flow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            background: linear-gradient(90deg, #f59e0b, #ef4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #94a3b8;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        .diagram-container {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        svg {
            width: 100%;
            height: auto;
            display: block;
        }
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .nav-links a {
            color: #f59e0b;
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .nav-links a:hover {
            background: #f59e0b;
            color: #0f172a;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #f59e0b;
        }
        .stat-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Data Processing Pipeline</h1>
        <p class="subtitle">End-to-End Flow: Source Files ‚Üí Processing ‚Üí Multi-Destination Output</p>

        <div class="diagram-container">
            <svg viewBox="0 0 1200 780" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="sourceGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6"/>
                        <stop offset="100%" style="stop-color:#1d4ed8"/>
                    </linearGradient>
                    <linearGradient id="processGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#f59e0b"/>
                        <stop offset="100%" style="stop-color:#d97706"/>
                    </linearGradient>
                    <linearGradient id="destGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#10b981"/>
                        <stop offset="100%" style="stop-color:#059669"/>
                    </linearGradient>
                    <linearGradient id="rabbitmqGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#8b5cf6"/>
                        <stop offset="100%" style="stop-color:#6d28d9"/>
                    </linearGradient>
                    <linearGradient id="cacheGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#06b6d4"/>
                        <stop offset="100%" style="stop-color:#0891b2"/>
                    </linearGradient>
                    <linearGradient id="errorGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#ef4444"/>
                        <stop offset="100%" style="stop-color:#dc2626"/>
                    </linearGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <filter id="shadow">
                        <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.4"/>
                    </filter>
                    <marker id="arrow" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
                        <polygon points="0 0, 12 4, 0 8" fill="#f59e0b"/>
                    </marker>
                    <marker id="arrowWhite" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
                        <polygon points="0 0, 12 4, 0 8" fill="#fff"/>
                    </marker>
                    <marker id="arrowRed" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
                        <polygon points="0 0, 12 4, 0 8" fill="#ef4444"/>
                    </marker>
                </defs>

                <!-- Background sections -->
                <rect x="20" y="20" width="160" height="280" rx="12" fill="rgba(59,130,246,0.1)" stroke="rgba(59,130,246,0.3)"/>
                <text x="100" y="50" text-anchor="middle" fill="#60a5fa" font-size="14" font-weight="bold">SOURCE FILES</text>

                <rect x="200" y="20" width="680" height="280" rx="12" fill="rgba(245,158,11,0.1)" stroke="rgba(245,158,11,0.3)"/>
                <text x="540" y="50" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="bold">PROCESSING PIPELINE</text>

                <rect x="900" y="20" width="180" height="280" rx="12" fill="rgba(16,185,129,0.1)" stroke="rgba(16,185,129,0.3)"/>
                <text x="990" y="50" text-anchor="middle" fill="#34d399" font-size="14" font-weight="bold">DESTINATIONS</text>

                <!-- Source Files -->
                <g filter="url(#shadow)">
                    <rect x="40" y="70" width="120" height="35" rx="8" fill="url(#sourceGrad)"/>
                    <text x="100" y="93" text-anchor="middle" fill="white" font-size="13" font-weight="bold">üìÑ CSV</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="115" width="120" height="35" rx="8" fill="url(#sourceGrad)"/>
                    <text x="100" y="138" text-anchor="middle" fill="white" font-size="13" font-weight="bold">üìë XML</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="160" width="120" height="35" rx="8" fill="url(#sourceGrad)"/>
                    <text x="100" y="183" text-anchor="middle" fill="white" font-size="13" font-weight="bold">üìä Excel</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="40" y="205" width="120" height="35" rx="8" fill="url(#sourceGrad)"/>
                    <text x="100" y="228" text-anchor="middle" fill="white" font-size="13" font-weight="bold">üìã JSON</text>
                </g>

                <!-- Storage indicator -->
                <rect x="40" y="255" width="120" height="25" rx="4" fill="rgba(59,130,246,0.3)"/>
                <text x="100" y="272" text-anchor="middle" fill="#93c5fd" font-size="10">üì• 50Gi Input</text>

                <!-- Processing Services -->
                <!-- File Discovery -->
                <g filter="url(#shadow)">
                    <rect x="230" y="100" width="140" height="120" rx="10" fill="url(#processGrad)"/>
                    <text x="300" y="130" text-anchor="middle" fill="white" font-size="12" font-weight="bold">üîç FILE</text>
                    <text x="300" y="148" text-anchor="middle" fill="white" font-size="12" font-weight="bold">DISCOVERY</text>
                    <line x1="250" y1="160" x2="350" y2="160" stroke="rgba(255,255,255,0.3)"/>
                    <text x="300" y="180" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">Poll Folders</text>
                    <text x="300" y="195" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">Deduplication</text>
                    <text x="300" y="210" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">2 replicas</text>
                </g>

                <!-- Arrow -->
                <path d="M 375 160 L 405 160" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow)" filter="url(#glow)"/>

                <!-- File Processor -->
                <g filter="url(#shadow)">
                    <rect x="420" y="100" width="140" height="120" rx="10" fill="url(#processGrad)"/>
                    <text x="490" y="130" text-anchor="middle" fill="white" font-size="12" font-weight="bold">‚öôÔ∏è FILE</text>
                    <text x="490" y="148" text-anchor="middle" fill="white" font-size="12" font-weight="bold">PROCESSOR</text>
                    <line x1="440" y1="160" x2="540" y2="160" stroke="rgba(255,255,255,0.3)"/>
                    <text x="490" y="180" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">Format Detect</text>
                    <text x="490" y="195" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">‚Üí JSON Convert</text>
                    <text x="490" y="210" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">2 replicas</text>
                </g>

                <!-- Arrow -->
                <path d="M 565 160 L 595 160" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow)" filter="url(#glow)"/>

                <!-- Validation -->
                <g filter="url(#shadow)">
                    <rect x="610" y="100" width="140" height="120" rx="10" fill="url(#processGrad)"/>
                    <text x="680" y="130" text-anchor="middle" fill="white" font-size="12" font-weight="bold">‚úÖ VALIDATION</text>
                    <line x1="630" y1="145" x2="730" y2="145" stroke="rgba(255,255,255,0.3)"/>
                    <text x="680" y="165" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">JSON Schema</text>
                    <text x="680" y="180" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">2020-12</text>
                    <text x="680" y="195" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="10">Business Rules</text>
                    <text x="680" y="210" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">1 replica</text>
                </g>

                <!-- Arrow -->
                <path d="M 755 160 L 775 160" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow)" filter="url(#glow)"/>

                <!-- Output (moved left to not overlap with DESTINATIONS) -->
                <g filter="url(#shadow)">
                    <rect x="790" y="100" width="90" height="120" rx="10" fill="url(#processGrad)"/>
                    <text x="835" y="130" text-anchor="middle" fill="white" font-size="11" font-weight="bold">üì§ OUTPUT</text>
                    <line x1="800" y1="145" x2="870" y2="145" stroke="rgba(255,255,255,0.3)"/>
                    <text x="835" y="165" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="9">Multi-Dest</text>
                    <text x="835" y="180" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="9">Router</text>
                    <text x="835" y="195" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="8">3 replicas</text>
                </g>

                <!-- Destinations -->
                <g filter="url(#shadow)">
                    <rect x="920" y="70" width="140" height="35" rx="6" fill="url(#destGrad)"/>
                    <text x="990" y="93" text-anchor="middle" fill="white" font-size="11" font-weight="bold">üìÅ Local Files</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="920" y="115" width="140" height="35" rx="6" fill="url(#destGrad)"/>
                    <text x="990" y="138" text-anchor="middle" fill="white" font-size="11" font-weight="bold">üîí SFTP</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="920" y="160" width="140" height="35" rx="6" fill="url(#destGrad)"/>
                    <text x="990" y="183" text-anchor="middle" fill="white" font-size="11" font-weight="bold">üåê HTTP APIs</text>
                </g>
                <g filter="url(#shadow)">
                    <rect x="920" y="205" width="140" height="35" rx="6" fill="url(#destGrad)"/>
                    <text x="990" y="228" text-anchor="middle" fill="white" font-size="11" font-weight="bold">üì® Message Queues</text>
                </g>

                <!-- Storage indicator -->
                <rect x="930" y="255" width="120" height="25" rx="4" fill="rgba(16,185,129,0.3)"/>
                <text x="990" y="272" text-anchor="middle" fill="#6ee7b7" font-size="10">üì§ 100Gi Output</text>

                <!-- Arrows from sources to Discovery -->
                <path d="M 165 100 L 225 140" stroke="#60a5fa" stroke-width="2" stroke-dasharray="5,3"/>
                <path d="M 165 155 L 225 155" stroke="#60a5fa" stroke-width="2" stroke-dasharray="5,3"/>
                <path d="M 165 210 L 225 170" stroke="#60a5fa" stroke-width="2" stroke-dasharray="5,3"/>
                <path d="M 165 265 L 225 185" stroke="#60a5fa" stroke-width="2" stroke-dasharray="5,3"/>

                <!-- RABBITMQ MESSAGE BUS -->
                <rect x="220" y="340" width="660" height="60" rx="10" fill="url(#rabbitmqGrad)" filter="url(#shadow)"/>
                <text x="550" y="365" text-anchor="middle" fill="white" font-size="14" font-weight="bold">RABBITMQ MESSAGE BUS</text>
                <text x="550" y="385" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">Event-Driven | MassTransit | 2 Brokers</text>

                <!-- RabbitMQ queues/exchanges -->
                <rect x="220" y="410" width="660" height="80" rx="8" fill="rgba(139,92,246,0.2)" stroke="rgba(139,92,246,0.4)"/>
                <text x="240" y="435" fill="#c4b5fd" font-size="11" font-weight="bold">Topics:</text>
                <text x="240" y="455" fill="#a5b4fc" font-size="10">üìç filepolling</text>
                <text x="380" y="455" fill="#a5b4fc" font-size="10">üìç filesreceiver.validationrequest</text>
                <text x="240" y="475" fill="#a5b4fc" font-size="10">üìç validation.completed</text>
                <text x="430" y="475" fill="#a5b4fc" font-size="10">üìç global.processingfailed</text>

                <!-- Vertical connectors to RabbitMQ -->
                <line x1="300" y1="225" x2="300" y2="335" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="4,4"/>
                <line x1="490" y1="225" x2="490" y2="335" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="4,4"/>
                <line x1="680" y1="225" x2="680" y2="335" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="4,4"/>

                <!-- HAZELCAST CACHE -->
                <rect x="220" y="510" width="660" height="100" rx="10" fill="url(#cacheGrad)" filter="url(#shadow)"/>
                <text x="550" y="535" text-anchor="middle" fill="white" font-size="14" font-weight="bold">HAZELCAST DISTRIBUTED CACHE</text>
                <text x="550" y="555" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="11">TTL: 300s | LRU Eviction | 256MB per map</text>

                <!-- Cache maps (inside Hazelcast box) -->
                <rect x="250" y="570" width="140" height="25" rx="4" fill="rgba(255,255,255,0.2)"/>
                <text x="320" y="587" text-anchor="middle" fill="white" font-size="10">üì¶ file-hashes</text>

                <rect x="410" y="570" width="140" height="25" rx="4" fill="rgba(255,255,255,0.2)"/>
                <text x="480" y="587" text-anchor="middle" fill="white" font-size="10">üìÑ file-content</text>

                <rect x="570" y="570" width="140" height="25" rx="4" fill="rgba(255,255,255,0.2)"/>
                <text x="640" y="587" text-anchor="middle" fill="white" font-size="10">‚úì valid-records</text>

                <!-- Cache connectors -->
                <line x1="300" y1="225" x2="300" y2="505" stroke="#06b6d4" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
                <line x1="490" y1="225" x2="490" y2="505" stroke="#06b6d4" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>
                <line x1="680" y1="225" x2="680" y2="505" stroke="#06b6d4" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>

                <!-- ERROR FLOW -->
                <rect x="220" y="630" width="660" height="70" rx="10" fill="url(#errorGrad)" filter="url(#shadow)"/>
                <text x="350" y="660" text-anchor="middle" fill="white" font-size="14" font-weight="bold">‚ö†Ô∏è ERROR HANDLING</text>

                <rect x="520" y="640" width="150" height="50" rx="8" fill="rgba(0,0,0,0.3)"/>
                <text x="595" y="665" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Invalid Records</text>
                <text x="595" y="680" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">MongoDB Storage</text>

                <rect x="690" y="640" width="120" height="50" rx="8" fill="rgba(0,0,0,0.3)"/>
                <text x="750" y="665" text-anchor="middle" fill="white" font-size="11" font-weight="bold">Reprocessing</text>
                <text x="750" y="680" text-anchor="middle" fill="rgba(255,255,255,0.8)" font-size="10">Manual/Auto</text>

                <!-- Error flow arrows (from Validation to Error Handling) -->
                <path d="M 610 160 L 590 160 L 590 320 L 200 320 L 200 665 L 215 665" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,3" fill="none"/>
                <polygon points="215,661 225,665 215,669" fill="#ef4444"/>
                <text x="150" y="500" fill="#fca5a5" font-size="9" transform="rotate(-90 150 500)">Validation Errors</text>

                <!-- Performance metrics -->
                <rect x="900" y="340" width="180" height="150" rx="10" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.1)"/>
                <text x="990" y="365" text-anchor="middle" fill="#94a3b8" font-size="12" font-weight="bold">PERFORMANCE</text>
                <line x1="920" y1="375" x2="1060" y2="375" stroke="rgba(255,255,255,0.1)"/>
                <text x="925" y="400" fill="#a5b4fc" font-size="10">‚ö° &lt;1s per 100 records</text>
                <text x="925" y="420" fill="#a5b4fc" font-size="10">üìä 95%+ cache hit rate</text>
                <text x="925" y="440" fill="#a5b4fc" font-size="10">üöÄ &lt;5s service startup</text>
                <text x="925" y="460" fill="#a5b4fc" font-size="10">üìà P99 latency &lt;500ms</text>
                <text x="925" y="480" fill="#a5b4fc" font-size="10">‚úì 1000 files tested</text>
            </svg>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value">4</div>
                <div class="stat-label">Input Formats Supported</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">4</div>
                <div class="stat-label">Output Destinations</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">4</div>
                <div class="stat-label">RabbitMQ Queues</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3</div>
                <div class="stat-label">Hazelcast Maps</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">&lt;1s</div>
                <div class="stat-label">Per 100 Records</div>
            </div>
        </div>

        <div class="nav-links">
            <a href="index.html">‚Üê All Diagrams</a>
            <a href="architecture-overview.html">‚Üê Architecture Overview</a>
            <a href="observability.html">Observability Stack ‚Üí</a>
        </div>
    </div>
</body>
</html>
