<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Microservices View</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --accent-blue: #58a6ff;
            --accent-purple: #bc8cff;
            --accent-green: #3fb950;
            --accent-yellow: #f0883e;
            --accent-red: #f85149;
            --accent-cyan: #39c5cf;
            --accent-pink: #db6d97;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --border-color: #30363d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
        }

        .main-container {
            display: grid;
            grid-template-columns: 1fr 380px;
            height: 100vh;
            gap: 0;
        }

        .left-panel {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .right-panel {
            background: var(--bg-secondary);
            border-left: 2px solid var(--border-color);
            overflow-y: auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            padding: 20px 30px;
            border-bottom: 2px solid var(--border-color);
        }

        .header h1 {
            font-size: 1.8em;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Pipeline Flow Section */
        .pipeline-section {
            padding: 30px;
            background: var(--bg-primary);
            border-bottom: 2px solid var(--border-color);
        }

        .section-title {
            font-size: 1.1em;
            color: var(--text-secondary);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .pipeline-flow {
            display: flex;
            align-items: center;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .service-node {
            min-width: 140px;
            padding: 15px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .service-node:hover {
            transform: translateY(-3px);
            border-color: var(--accent-blue);
            box-shadow: 0 8px 24px rgba(88, 166, 255, 0.2);
        }

        .service-node.selected {
            border-color: var(--accent-purple);
            background: var(--bg-tertiary);
            box-shadow: 0 0 30px rgba(188, 140, 255, 0.3);
        }

        .service-node.healthy {
            border-color: var(--accent-green);
        }

        .service-node.warning {
            border-color: var(--accent-yellow);
        }

        .node-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .node-name {
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .node-metric {
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        .node-throughput {
            font-weight: bold;
            color: var(--accent-blue);
        }

        .flow-arrow {
            color: var(--accent-blue);
            font-size: 1.5em;
            position: relative;
        }

        .flow-item {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--accent-cyan);
            border-radius: 50%;
            box-shadow: 0 0 15px var(--accent-cyan);
            animation: flowAnimation 2s linear infinite;
        }

        @keyframes flowAnimation {
            0% {
                left: -10px;
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                left: 30px;
                opacity: 0;
            }
        }

        /* Event Log Section */
        .event-log-section {
            flex: 1;
            padding: 30px;
            background: var(--bg-primary);
            overflow-y: auto;
            border-bottom: 2px solid var(--border-color);
        }

        .event-log {
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }

        .event-entry {
            padding: 8px 12px;
            margin-bottom: 4px;
            background: var(--bg-secondary);
            border-left: 3px solid;
            border-radius: 4px;
            animation: fadeIn 0.3s ease-in;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .event-entry.success {
            border-color: var(--accent-green);
        }

        .event-entry.warning {
            border-color: var(--accent-yellow);
        }

        .event-entry.error {
            border-color: var(--accent-red);
        }

        .event-entry.info {
            border-color: var(--accent-blue);
        }

        .event-time {
            color: var(--text-secondary);
            min-width: 80px;
        }

        .event-service {
            color: var(--accent-purple);
            min-width: 150px;
        }

        .event-message {
            color: var(--text-primary);
        }

        .event-badge {
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .event-badge.success {
            background: var(--accent-green);
            color: #000;
        }

        .event-badge.error {
            background: var(--accent-red);
            color: #fff;
        }

        .event-badge.warning {
            background: var(--accent-yellow);
            color: #000;
        }

        /* Metrics Section */
        .metrics-section {
            padding: 30px;
            background: var(--bg-secondary);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .metric-label {
            font-size: 0.75em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .metric-trend {
            font-size: 0.8em;
            margin-top: 5px;
        }

        .metric-trend.up {
            color: var(--accent-green);
        }

        .metric-trend.down {
            color: var(--accent-red);
        }

        .mini-charts {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .mini-chart {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .mini-chart-title {
            font-size: 0.85em;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .sparkline {
            width: 100%;
            height: 60px;
        }

        /* Right Panel - Detail View */
        .detail-header {
            margin-bottom: 25px;
        }

        .detail-header h2 {
            font-size: 1.5em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .detail-status.healthy {
            background: var(--accent-green);
            color: #000;
        }

        .detail-status.warning {
            background: var(--accent-yellow);
            color: #000;
        }

        .detail-section {
            margin-bottom: 25px;
        }

        .detail-section-title {
            font-size: 0.9em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .detail-metrics {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border-color);
        }

        .detail-metric-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-metric-row:last-child {
            border-bottom: none;
        }

        .detail-metric-label {
            color: var(--text-secondary);
            font-size: 0.85em;
        }

        .detail-metric-value {
            font-weight: bold;
            color: var(--text-primary);
        }

        .progress-container {
            margin-top: 5px;
        }

        .progress-bar-wrapper {
            width: 100%;
            height: 8px;
            background: var(--bg-primary);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .detail-chart {
            width: 100%;
            height: 150px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .timeline-container {
            position: relative;
            padding-left: 20px;
        }

        .timeline-item {
            position: relative;
            padding: 10px 0 10px 25px;
            border-left: 2px solid var(--border-color);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 15px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-blue);
        }

        .timeline-time {
            font-size: 0.75em;
            color: var(--text-secondary);
        }

        .timeline-event {
            font-size: 0.85em;
            color: var(--text-primary);
            margin-top: 5px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-blue);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="left-panel">
            <!-- Header -->
            <div class="header">
                <h1>ðŸ”„ Combined Pipeline View</h1>
            </div>

            <!-- Pipeline Flow -->
            <div class="pipeline-section">
                <div class="section-title">âš¡ Pipeline Flow</div>
                <div class="pipeline-flow" id="pipelineFlow">
                    <!-- Pipeline nodes will be generated here -->
                </div>
            </div>

            <!-- Event Log -->
            <div class="event-log-section">
                <div class="section-title">ðŸ“‹ Real-Time Event Log</div>
                <div class="event-log" id="eventLog">
                    <!-- Events will be added here -->
                </div>
            </div>

            <!-- Metrics -->
            <div class="metrics-section">
                <div class="section-title">ðŸ“Š Aggregate Metrics</div>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Throughput</div>
                        <div class="metric-value" id="totalThroughput">9.3K/s</div>
                        <div class="metric-trend up">â†‘ 12.3%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Latency</div>
                        <div class="metric-value" id="avgLatency">42ms</div>
                        <div class="metric-trend down">â†“ 8ms</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Success Rate</div>
                        <div class="metric-value" id="successRate">98.6%</div>
                        <div class="metric-trend up">â†‘ 0.4%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Errors</div>
                        <div class="metric-value" id="totalErrors">127</div>
                        <div class="metric-trend up">â†‘ 15</div>
                    </div>
                </div>

                <div class="mini-charts">
                    <div class="mini-chart">
                        <div class="mini-chart-title">Throughput Trend</div>
                        <canvas class="sparkline" id="sparkline1"></canvas>
                    </div>
                    <div class="mini-chart">
                        <div class="mini-chart-title">Error Rate</div>
                        <canvas class="sparkline" id="sparkline2"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Detail View -->
        <div class="right-panel" id="detailPanel">
            <div class="detail-header">
                <h2>
                    <span id="detailIcon">ðŸ“¥</span>
                    <span id="detailName">Data Ingestion</span>
                </h2>
                <span class="detail-status healthy" id="detailStatus">Running</span>
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Performance Metrics</div>
                <div class="detail-metrics">
                    <div class="detail-metric-row">
                        <span class="detail-metric-label">Throughput</span>
                        <span class="detail-metric-value" id="detailThroughput">1,250 items/s</span>
                    </div>
                    <div class="detail-metric-row">
                        <span class="detail-metric-label">Processing Time</span>
                        <span class="detail-metric-value" id="detailProcessingTime">12ms</span>
                    </div>
                    <div class="detail-metric-row">
                        <span class="detail-metric-label">Success Rate</span>
                        <span class="detail-metric-value" id="detailSuccessRate">99.8%</span>
                    </div>
                    <div class="detail-metric-row">
                        <span class="detail-metric-label">Queue Size</span>
                        <span class="detail-metric-value" id="detailQueueSize">45</span>
                    </div>
                    <div class="detail-metric-row">
                        <span class="detail-metric-label">Error Count</span>
                        <span class="detail-metric-value" id="detailErrors">2</span>
                    </div>
                </div>
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Resource Usage</div>
                <div class="detail-metrics">
                    <div class="detail-metric-row">
                        <span class="detail-metric-label">CPU Usage</span>
                        <span class="detail-metric-value" id="detailCPU">65%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-fill" id="cpuProgress" style="width: 65%"></div>
                        </div>
                    </div>
                    <div class="detail-metric-row" style="margin-top: 15px;">
                        <span class="detail-metric-label">Memory Usage</span>
                        <span class="detail-metric-value" id="detailMemory">72%</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar-wrapper">
                            <div class="progress-bar-fill" id="memoryProgress" style="width: 72%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Performance Chart</div>
                <canvas class="detail-chart" id="detailChart"></canvas>
            </div>

            <div class="detail-section">
                <div class="detail-section-title">Recent Activity</div>
                <div class="timeline-container" id="timelineContainer">
                    <!-- Timeline items will be added here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const services = [
            { name: 'Data Ingestion', icon: 'ðŸ“¥', throughput: 1250, processingTime: 12, status: 'healthy', successRate: 99.8, queueSize: 45, cpu: 65, memory: 72, errors: 2 },
            { name: 'Data Validation', icon: 'âœ“', throughput: 1248, processingTime: 8, status: 'healthy', successRate: 98.5, queueSize: 12, cpu: 45, memory: 58, errors: 18 },
            { name: 'Data Transformation', icon: 'âš¡', throughput: 1230, processingTime: 24, status: 'healthy', successRate: 99.2, queueSize: 28, cpu: 78, memory: 81, errors: 10 },
            { name: 'Data Enrichment', icon: 'âœ¨', throughput: 1220, processingTime: 156, status: 'warning', successRate: 95.3, queueSize: 89, cpu: 88, memory: 76, errors: 57 },
            { name: 'Data Processing', icon: 'âš™ï¸', throughput: 1163, processingTime: 42, status: 'healthy', successRate: 99.7, queueSize: 15, cpu: 72, memory: 69, errors: 3 },
            { name: 'Data Aggregation', icon: 'ðŸ“Š', throughput: 1160, processingTime: 18, status: 'healthy', successRate: 99.9, queueSize: 8, cpu: 55, memory: 62, errors: 1 },
            { name: 'Data Storage', icon: 'ðŸ’¾', throughput: 1159, processingTime: 35, status: 'healthy', successRate: 99.5, queueSize: 22, cpu: 68, memory: 85, errors: 6 },
            { name: 'Data Export', icon: 'ðŸ“¤', throughput: 1153, processingTime: 28, status: 'healthy', successRate: 99.4, queueSize: 18, cpu: 52, memory: 64, errors: 7 }
        ];

        let selectedService = 0;
        let eventLog = [];

        // Render Pipeline
        function renderPipeline() {
            const flow = document.getElementById('pipelineFlow');
            flow.innerHTML = '';

            services.forEach((service, index) => {
                const node = document.createElement('div');
                node.className = `service-node ${service.status} ${index === selectedService ? 'selected' : ''}`;
                node.innerHTML = `
                    <div class="node-icon">${service.icon}</div>
                    <div class="node-name">${service.name.split(' ')[1]}</div>
                    <div class="node-metric">
                        <span class="node-throughput">${service.throughput}</span> /s
                    </div>
                `;
                node.onclick = () => selectService(index);
                flow.appendChild(node);

                if (index < services.length - 1) {
                    const arrow = document.createElement('div');
                    arrow.className = 'flow-arrow';
                    arrow.innerHTML = 'â†’<div class="flow-item"></div>';
                    flow.appendChild(arrow);
                }
            });
        }

        // Select Service
        function selectService(index) {
            selectedService = index;
            renderPipeline();
            updateDetailPanel();
        }

        // Update Detail Panel
        function updateDetailPanel() {
            const service = services[selectedService];
            document.getElementById('detailIcon').textContent = service.icon;
            document.getElementById('detailName').textContent = service.name;
            document.getElementById('detailStatus').textContent = service.status;
            document.getElementById('detailStatus').className = `detail-status ${service.status}`;
            
            document.getElementById('detailThroughput').textContent = service.throughput.toLocaleString() + ' items/s';
            document.getElementById('detailProcessingTime').textContent = service.processingTime + 'ms';
            document.getElementById('detailSuccessRate').textContent = service.successRate + '%';
            document.getElementById('detailQueueSize').textContent = service.queueSize;
            document.getElementById('detailErrors').textContent = service.errors;
            document.getElementById('detailCPU').textContent = service.cpu + '%';
            document.getElementById('detailMemory').textContent = service.memory + '%';
            
            document.getElementById('cpuProgress').style.width = service.cpu + '%';
            document.getElementById('memoryProgress').style.width = service.memory + '%';

            drawDetailChart();
            updateTimeline();
        }

        // Draw Detail Chart
        function drawDetailChart() {
            const canvas = document.getElementById('detailChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const dataPoints = 20;
            const data = [];
            const service = services[selectedService];
            let base = service.throughput;
            
            for (let i = 0; i < dataPoints; i++) {
                base += (Math.random() - 0.5) * 100;
                data.push(Math.max(1000, base));
            }

            const maxVal = Math.max(...data);
            const minVal = Math.min(...data);
            const range = maxVal - minVal;
            const xStep = (width - 40) / (dataPoints - 1);

            // Draw area
            ctx.beginPath();
            ctx.moveTo(20, height - 20);
            data.forEach((val, i) => {
                const x = 20 + i * xStep;
                const y = height - 20 - ((val - minVal) / range) * (height - 40);
                ctx.lineTo(x, y);
            });
            ctx.lineTo(20 + (dataPoints - 1) * xStep, height - 20);
            ctx.closePath();
            ctx.fillStyle = 'rgba(88, 166, 255, 0.2)';
            ctx.fill();

            // Draw line
            ctx.beginPath();
            data.forEach((val, i) => {
                const x = 20 + i * xStep;
                const y = height - 20 - ((val - minVal) / range) * (height - 40);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.strokeStyle = '#58a6ff';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        // Update Timeline
        function updateTimeline() {
            const timeline = document.getElementById('timelineContainer');
            const service = services[selectedService];
            
            const events = [
                { time: '2 sec ago', event: `Processed ${Math.floor(Math.random() * 100)} items` },
                { time: '15 sec ago', event: `Queue size: ${service.queueSize}` },
                { time: '32 sec ago', event: service.errors > 0 ? `${service.errors} errors detected` : 'No errors' },
                { time: '1 min ago', event: `CPU: ${service.cpu}%, Memory: ${service.memory}%` },
                { time: '2 min ago', event: `Throughput: ${service.throughput} items/s` }
            ];

            timeline.innerHTML = events.map(e => `
                <div class="timeline-item">
                    <div class="timeline-time">${e.time}</div>
                    <div class="timeline-event">${e.event}</div>
                </div>
            `).join('');
        }

        // Add Event to Log
        function addEvent() {
            const types = ['success', 'success', 'success', 'success', 'warning', 'error', 'info'];
            const type = types[Math.floor(Math.random() * types.length)];
            const service = services[Math.floor(Math.random() * services.length)];
            
            const messages = {
                success: [`Processed batch #${Math.floor(Math.random() * 10000)}`, `Completed ${Math.floor(Math.random() * 500)} items`, `Success: ${Math.floor(Math.random() * 100)} records`],
                warning: [`Queue size high: ${Math.floor(Math.random() * 100)}`, `Slow processing detected`, `Retry attempt #${Math.floor(Math.random() * 5)}`],
                error: [`Failed to process item`, `Connection timeout`, `Validation error`],
                info: [`Service health check passed`, `Configuration updated`, `Cache cleared`]
            };

            const message = messages[type][Math.floor(Math.random() * messages[type].length)];
            const time = new Date().toLocaleTimeString();

            const event = {
                type,
                time,
                service: service.name,
                message,
                badge: type === 'success' ? 'âœ“' : type === 'error' ? 'âœ—' : type === 'warning' ? 'âš ' : 'â„¹'
            };

            eventLog.unshift(event);
            if (eventLog.length > 50) eventLog.pop();

            renderEventLog();
        }

        // Render Event Log
        function renderEventLog() {
            const log = document.getElementById('eventLog');
            log.innerHTML = eventLog.slice(0, 30).map(event => `
                <div class="event-entry ${event.type}">
                    <span class="event-time">${event.time}</span>
                    <span class="event-badge ${event.type}">${event.badge}</span>
                    <span class="event-service">${event.service}</span>
                    <span class="event-message">${event.message}</span>
                </div>
            `).join('');
        }

        // Draw Sparklines
        function drawSparkline(canvasId, data, color) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const maxVal = Math.max(...data);
            const minVal = Math.min(...data);
            const range = maxVal - minVal || 1;
            const xStep = width / (data.length - 1);

            // Draw area
            ctx.beginPath();
            ctx.moveTo(0, height);
            data.forEach((val, i) => {
                const x = i * xStep;
                const y = height - ((val - minVal) / range) * height;
                ctx.lineTo(x, y);
            });
            ctx.lineTo(width, height);
            ctx.closePath();
            ctx.fillStyle = color + '30';
            ctx.fill();

            // Draw line
            ctx.beginPath();
            data.forEach((val, i) => {
                const x = i * xStep;
                const y = height - ((val - minVal) / range) * height;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        // Generate sparkline data
        let sparklineData1 = Array.from({ length: 30 }, () => 8000 + Math.random() * 2000);
        let sparklineData2 = Array.from({ length: 30 }, () => 1 + Math.random() * 2);

        // Update metrics
        function updateMetrics() {
            sparklineData1.shift();
            sparklineData1.push(8000 + Math.random() * 2000);
            sparklineData2.shift();
            sparklineData2.push(1 + Math.random() * 2);

            drawSparkline('sparkline1', sparklineData1, '#58a6ff');
            drawSparkline('sparkline2', sparklineData2, '#f85149');

            // Update counters
            const totalThroughput = services.reduce((sum, s) => sum + s.throughput, 0);
            document.getElementById('totalThroughput').textContent = (totalThroughput / 1000).toFixed(1) + 'K/s';
        }

        // Initialize
        renderPipeline();
        updateDetailPanel();
        
        // Add events periodically
        setInterval(addEvent, 500);
        
        // Update metrics
        setInterval(updateMetrics, 2000);
        updateMetrics();
    </script>
</body>
</html>
