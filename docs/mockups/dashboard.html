<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservices Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --accent-blue: #3b82f6;
            --accent-purple: #a855f7;
            --accent-green: #10b981;
            --accent-yellow: #fbbf24;
            --accent-red: #ef4444;
            --accent-cyan: #06b6d4;
            --accent-pink: #ec4899;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Inter', 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 20px;
            min-height: 100vh;
        }

        .dashboard {
            max-width: 1800px;
            margin: 0 auto;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
        }

        .dashboard-title h1 {
            font-size: 2em;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }

        .dashboard-title p {
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .health-indicator {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .health-score {
            font-size: 3em;
            font-weight: bold;
            color: var(--accent-green);
        }

        .health-status {
            text-align: left;
        }

        .health-label {
            font-size: 0.8em;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .health-text {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--accent-green);
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.1em;
            font-weight: 600;
        }

        .card-icon {
            font-size: 1.5em;
        }

        .large-card {
            grid-column: span 6;
        }

        .medium-card {
            grid-column: span 4;
        }

        .small-card {
            grid-column: span 3;
        }

        .full-card {
            grid-column: span 12;
        }

        /* Service Grid Cards */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .service-mini-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }

        .service-mini-card:hover {
            transform: scale(1.05);
        }

        .service-mini-card.healthy {
            border-color: var(--accent-green);
        }

        .service-mini-card.warning {
            border-color: var(--accent-yellow);
        }

        .service-name {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .service-metric {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .service-sublabel {
            font-size: 0.75em;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Charts */
        canvas {
            max-width: 100%;
            height: auto;
        }

        /* Stats counters */
        .stat-counter {
            text-align: center;
            padding: 15px;
        }

        .counter-value {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--counter-color-1), var(--counter-color-2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: countUp 1s ease-out;
        }

        .counter-label {
            color: var(--text-secondary);
            font-size: 0.85em;
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .counter-change {
            font-size: 0.8em;
            margin-top: 5px;
        }

        .counter-change.positive {
            color: var(--accent-green);
        }

        .counter-change.negative {
            color: var(--accent-red);
        }

        /* Alert Panel */
        .alerts-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .alert-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .alert-item.warning {
            border-color: var(--accent-yellow);
        }

        .alert-item.error {
            border-color: var(--accent-red);
        }

        .alert-item.info {
            border-color: var(--accent-blue);
        }

        .alert-icon {
            font-size: 1.5em;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .alert-message {
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .alert-time {
            font-size: 0.75em;
            color: var(--text-secondary);
            white-space: nowrap;
        }

        /* Circular gauges */
        .gauges-container {
            display: flex;
            justify-content: space-around;
            gap: 20px;
        }

        .circular-gauge {
            text-align: center;
        }

        .gauge-svg {
            width: 120px;
            height: 120px;
        }

        .gauge-label {
            margin-top: 10px;
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .gauge-value {
            font-size: 1.5em;
            font-weight: bold;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-purple);
        }

        /* Loading animation */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="dashboard-header">
            <div class="dashboard-title">
                <h1>üìä Microservices Dashboard</h1>
                <p>Comprehensive Pipeline Analytics & Monitoring</p>
            </div>
            <div class="health-indicator">
                <div class="health-score" id="healthScore">95</div>
                <div class="health-status">
                    <div class="health-label">System Health</div>
                    <div class="health-text" id="healthText">Excellent</div>
                </div>
            </div>
        </div>

        <!-- Top Stats Row -->
        <div class="grid-container">
            <div class="card small-card">
                <div class="stat-counter" style="--counter-color-1: #3b82f6; --counter-color-2: #2563eb;">
                    <div class="counter-value" id="totalRequests">9.2K</div>
                    <div class="counter-label">Total Requests/sec</div>
                    <div class="counter-change positive">‚Üë 12.5%</div>
                </div>
            </div>
            <div class="card small-card">
                <div class="stat-counter" style="--counter-color-1: #10b981; --counter-color-2: #059669;">
                    <div class="counter-value" id="successRate">98.7%</div>
                    <div class="counter-label">Success Rate</div>
                    <div class="counter-change positive">‚Üë 0.3%</div>
                </div>
            </div>
            <div class="card small-card">
                <div class="stat-counter" style="--counter-color-1: #a855f7; --counter-color-2: #9333ea;">
                    <div class="counter-value" id="avgLatency">45ms</div>
                    <div class="counter-label">Avg Latency</div>
                    <div class="counter-change negative">‚Üë 5ms</div>
                </div>
            </div>
            <div class="card small-card">
                <div class="stat-counter" style="--counter-color-1: #ef4444; --counter-color-2: #dc2626;">
                    <div class="counter-value" id="totalErrors">104</div>
                    <div class="counter-label">Total Errors</div>
                    <div class="counter-change positive">‚Üì 8.2%</div>
                </div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="grid-container">
            <div class="card large-card">
                <div class="card-header">
                    <div class="card-title">üìà Throughput Timeline</div>
                    <div class="card-icon">‚ö°</div>
                </div>
                <canvas id="throughputChart" width="600" height="250"></canvas>
            </div>
            <div class="card medium-card">
                <div class="card-header">
                    <div class="card-title">üéØ Success vs Failure</div>
                    <div class="card-icon">‚úì</div>
                </div>
                <canvas id="donutChart" width="300" height="250"></canvas>
            </div>
        </div>

        <!-- Services Grid -->
        <div class="grid-container">
            <div class="card full-card">
                <div class="card-header">
                    <div class="card-title">üîß Service Metrics</div>
                    <div class="card-icon">‚öôÔ∏è</div>
                </div>
                <div class="services-grid" id="servicesGrid">
                    <!-- Services will be populated here -->
                </div>
            </div>
        </div>

        <!-- Processing Time & Queue Size Row -->
        <div class="grid-container">
            <div class="card large-card">
                <div class="card-header">
                    <div class="card-title">‚è±Ô∏è Processing Time Comparison</div>
                    <div class="card-icon">üìä</div>
                </div>
                <canvas id="barChart" width="600" height="250"></canvas>
            </div>
            <div class="card large-card">
                <div class="card-header">
                    <div class="card-title">üì¶ Queue Sizes</div>
                    <div class="card-icon">üìà</div>
                </div>
                <canvas id="areaChart" width="600" height="250"></canvas>
            </div>
        </div>

        <!-- Resource Usage & Alerts Row -->
        <div class="grid-container">
            <div class="card medium-card">
                <div class="card-header">
                    <div class="card-title">üíª System Resources</div>
                    <div class="card-icon">‚ö°</div>
                </div>
                <div class="gauges-container">
                    <div class="circular-gauge">
                        <svg class="gauge-svg" id="cpuGauge"></svg>
                        <div class="gauge-label">CPU Usage</div>
                        <div class="gauge-value" id="cpuValue">0%</div>
                    </div>
                    <div class="circular-gauge">
                        <svg class="gauge-svg" id="memoryGauge"></svg>
                        <div class="gauge-label">Memory Usage</div>
                        <div class="gauge-value" id="memoryValue">0%</div>
                    </div>
                </div>
            </div>
            <div class="card" style="grid-column: span 8;">
                <div class="card-header">
                    <div class="card-title">üö® Recent Alerts</div>
                    <div class="card-icon">üîî</div>
                </div>
                <div class="alerts-list" id="alertsList">
                    <!-- Alerts will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const services = [
            { name: 'Data Ingestion', icon: 'üì•', throughput: 1250, processingTime: 12, status: 'healthy', queueSize: 45 },
            { name: 'Data Validation', icon: '‚úì', throughput: 1248, processingTime: 8, status: 'healthy', queueSize: 12 },
            { name: 'Data Transformation', icon: '‚ö°', throughput: 1230, processingTime: 24, status: 'healthy', queueSize: 28 },
            { name: 'Data Enrichment', icon: '‚ú®', throughput: 1220, processingTime: 156, status: 'warning', queueSize: 89 },
            { name: 'Data Processing', icon: '‚öôÔ∏è', throughput: 1163, processingTime: 42, status: 'healthy', queueSize: 15 },
            { name: 'Data Aggregation', icon: 'üìä', throughput: 1160, processingTime: 18, status: 'healthy', queueSize: 8 },
            { name: 'Data Storage', icon: 'üíæ', throughput: 1159, processingTime: 35, status: 'healthy', queueSize: 22 },
            { name: 'Data Export', icon: 'üì§', throughput: 1153, processingTime: 28, status: 'healthy', queueSize: 18 }
        ];

        const alerts = [
            { type: 'warning', icon: '‚ö†Ô∏è', title: 'High Queue Size', message: 'Data Enrichment queue at 89 items', time: '2 min ago' },
            { type: 'error', icon: '‚ùå', title: 'Processing Error', message: 'Failed to validate 3 records in batch #4521', time: '5 min ago' },
            { type: 'info', icon: '‚ÑπÔ∏è', title: 'Service Restarted', message: 'Data Transformation service auto-recovered', time: '8 min ago' },
            { type: 'warning', icon: '‚ö†Ô∏è', title: 'High CPU Usage', message: 'Data Enrichment CPU at 88%', time: '12 min ago' },
            { type: 'info', icon: '‚ÑπÔ∏è', title: 'Throughput Spike', message: 'Ingestion rate increased by 15%', time: '15 min ago' }
        ];

        // Populate Services Grid
        function populateServicesGrid() {
            const grid = document.getElementById('servicesGrid');
            grid.innerHTML = services.map(service => `
                <div class="service-mini-card ${service.status}">
                    <div class="service-name">${service.icon} ${service.name}</div>
                    <div class="service-metric">${service.throughput}</div>
                    <div class="service-sublabel">items/sec</div>
                </div>
            `).join('');
        }

        // Populate Alerts
        function populateAlerts() {
            const alertsList = document.getElementById('alertsList');
            alertsList.innerHTML = alerts.map(alert => `
                <div class="alert-item ${alert.type}">
                    <div class="alert-icon">${alert.icon}</div>
                    <div class="alert-content">
                        <div class="alert-title">${alert.title}</div>
                        <div class="alert-message">${alert.message}</div>
                    </div>
                    <div class="alert-time">${alert.time}</div>
                </div>
            `).join('');
        }

        // Draw Throughput Line Chart
        function drawThroughputChart() {
            const canvas = document.getElementById('throughputChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Clear canvas
            ctx.clearRect(0, 0, width, height);

            // Generate mock data
            const dataPoints = 30;
            const data = [];
            for (let i = 0; i < dataPoints; i++) {
                data.push(8000 + Math.random() * 2000);
            }

            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 5; i++) {
                const y = (height / 5) * i + 20;
                ctx.beginPath();
                ctx.moveTo(40, y);
                ctx.lineTo(width - 20, y);
                ctx.stroke();
            }

            // Draw axes labels
            ctx.fillStyle = '#94a3b8';
            ctx.font = '11px sans-serif';
            ctx.fillText('10K', 10, 25);
            ctx.fillText('8K', 10, height / 2);
            ctx.fillText('6K', 10, height - 20);

            // Draw line
            const maxVal = Math.max(...data);
            const minVal = Math.min(...data);
            const range = maxVal - minVal;
            const xStep = (width - 60) / (dataPoints - 1);

            // Create gradient
            const gradient = ctx.createLinearGradient(0, 20, 0, height - 20);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.8)');
            gradient.addColorStop(1, 'rgba(168, 85, 247, 0.8)');

            // Draw area under line
            ctx.beginPath();
            ctx.moveTo(40, height - 20);
            data.forEach((val, i) => {
                const x = 40 + i * xStep;
                const y = height - 20 - ((val - minVal) / range) * (height - 40);
                ctx.lineTo(x, y);
            });
            ctx.lineTo(40 + (dataPoints - 1) * xStep, height - 20);
            ctx.closePath();
            ctx.fillStyle = 'rgba(59, 130, 246, 0.2)';
            ctx.fill();

            // Draw line
            ctx.beginPath();
            data.forEach((val, i) => {
                const x = 40 + i * xStep;
                const y = height - 20 - ((val - minVal) / range) * (height - 40);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.strokeStyle = gradient;
            ctx.lineWidth = 3;
            ctx.stroke();

            // Draw points
            data.forEach((val, i) => {
                const x = 40 + i * xStep;
                const y = height - 20 - ((val - minVal) / range) * (height - 40);
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fillStyle = '#3b82f6';
                ctx.fill();
            });
        }

        // Draw Donut Chart
        function drawDonutChart() {
            const canvas = document.getElementById('donutChart');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 80;
            const innerRadius = 50;

            const successRate = 98.7;
            const failureRate = 1.3;
            const total = successRate + failureRate;

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw success arc
            const successAngle = (successRate / total) * 2 * Math.PI;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, -Math.PI / 2, -Math.PI / 2 + successAngle);
            ctx.arc(centerX, centerY, innerRadius, -Math.PI / 2 + successAngle, -Math.PI / 2, true);
            ctx.closePath();
            ctx.fillStyle = '#10b981';
            ctx.fill();

            // Draw failure arc
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, -Math.PI / 2 + successAngle, -Math.PI / 2 + 2 * Math.PI);
            ctx.arc(centerX, centerY, innerRadius, -Math.PI / 2 + 2 * Math.PI, -Math.PI / 2 + successAngle, true);
            ctx.closePath();
            ctx.fillStyle = '#ef4444';
            ctx.fill();

            // Draw center text
            ctx.fillStyle = '#f8fafc';
            ctx.font = 'bold 24px sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('98.7%', centerX, centerY - 5);
            ctx.font = '12px sans-serif';
            ctx.fillStyle = '#94a3b8';
            ctx.fillText('Success', centerX, centerY + 15);

            // Draw legend
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'left';
            
            ctx.fillStyle = '#10b981';
            ctx.fillRect(centerX - 60, canvas.height - 40, 15, 15);
            ctx.fillStyle = '#f8fafc';
            ctx.fillText('Success', centerX - 40, canvas.height - 28);

            ctx.fillStyle = '#ef4444';
            ctx.fillRect(centerX + 20, canvas.height - 40, 15, 15);
            ctx.fillStyle = '#f8fafc';
            ctx.fillText('Failure', centerX + 40, canvas.height - 28);
        }

        // Draw Bar Chart
        function drawBarChart() {
            const canvas = document.getElementById('barChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const barWidth = (width - 100) / services.length;
            const maxTime = Math.max(...services.map(s => s.processingTime));

            services.forEach((service, i) => {
                const barHeight = (service.processingTime / maxTime) * (height - 60);
                const x = 60 + i * barWidth;
                const y = height - 40 - barHeight;

                // Draw bar with gradient
                const gradient = ctx.createLinearGradient(x, y, x, height - 40);
                gradient.addColorStop(0, '#a855f7');
                gradient.addColorStop(1, '#3b82f6');

                ctx.fillStyle = gradient;
                ctx.fillRect(x, y, barWidth - 10, barHeight);

                // Draw value
                ctx.fillStyle = '#f8fafc';
                ctx.font = 'bold 11px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(service.processingTime + 'ms', x + barWidth / 2 - 5, y - 5);

                // Draw label
                ctx.save();
                ctx.translate(x + barWidth / 2 - 5, height - 20);
                ctx.rotate(-Math.PI / 4);
                ctx.fillStyle = '#94a3b8';
                ctx.font = '10px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText(service.name.split(' ')[1] || service.name, 0, 0);
                ctx.restore();
            });

            // Draw Y axis
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(55, 20);
            ctx.lineTo(55, height - 40);
            ctx.stroke();
        }

        // Draw Area Chart
        function drawAreaChart() {
            const canvas = document.getElementById('areaChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            ctx.clearRect(0, 0, width, height);

            const dataPoints = 20;
            const datasets = services.map(service => {
                const data = [];
                let base = service.queueSize;
                for (let i = 0; i < dataPoints; i++) {
                    base += (Math.random() - 0.5) * 10;
                    base = Math.max(0, Math.min(150, base));
                    data.push(base);
                }
                return data;
            });

            const maxVal = 150;
            const xStep = (width - 60) / (dataPoints - 1);

            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 5; i++) {
                const y = (height / 5) * i + 20;
                ctx.beginPath();
                ctx.moveTo(40, y);
                ctx.lineTo(width - 20, y);
                ctx.stroke();
            }

            // Draw stacked areas
            const colors = [
                'rgba(59, 130, 246, 0.3)',
                'rgba(16, 185, 129, 0.3)',
                'rgba(251, 191, 36, 0.3)',
                'rgba(168, 85, 247, 0.3)',
                'rgba(6, 182, 212, 0.3)',
                'rgba(139, 92, 246, 0.3)',
                'rgba(236, 72, 153, 0.3)',
                'rgba(20, 184, 166, 0.3)'
            ];

            datasets.forEach((data, idx) => {
                ctx.beginPath();
                ctx.moveTo(40, height - 20);
                data.forEach((val, i) => {
                    const x = 40 + i * xStep;
                    const y = height - 20 - (val / maxVal) * (height - 40);
                    ctx.lineTo(x, y);
                });
                ctx.lineTo(40 + (dataPoints - 1) * xStep, height - 20);
                ctx.closePath();
                ctx.fillStyle = colors[idx];
                ctx.fill();
            });
        }

        // Draw Circular Gauge
        function drawCircularGauge(svgId, value, color1, color2) {
            const svg = document.getElementById(svgId);
            svg.innerHTML = '';
            
            const ns = 'http://www.w3.org/2000/svg';
            const radius = 50;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (value / 100) * circumference;

            // Background circle
            const bgCircle = document.createElementNS(ns, 'circle');
            bgCircle.setAttribute('cx', '60');
            bgCircle.setAttribute('cy', '60');
            bgCircle.setAttribute('r', radius);
            bgCircle.setAttribute('fill', 'none');
            bgCircle.setAttribute('stroke', 'rgba(255, 255, 255, 0.1)');
            bgCircle.setAttribute('stroke-width', '10');
            svg.appendChild(bgCircle);

            // Create gradient
            const defs = document.createElementNS(ns, 'defs');
            const gradient = document.createElementNS(ns, 'linearGradient');
            gradient.setAttribute('id', `gradient-${svgId}`);
            gradient.setAttribute('x1', '0%');
            gradient.setAttribute('y1', '0%');
            gradient.setAttribute('x2', '100%');
            gradient.setAttribute('y2', '100%');
            
            const stop1 = document.createElementNS(ns, 'stop');
            stop1.setAttribute('offset', '0%');
            stop1.setAttribute('style', `stop-color:${color1};stop-opacity:1`);
            
            const stop2 = document.createElementNS(ns, 'stop');
            stop2.setAttribute('offset', '100%');
            stop2.setAttribute('style', `stop-color:${color2};stop-opacity:1`);
            
            gradient.appendChild(stop1);
            gradient.appendChild(stop2);
            defs.appendChild(gradient);
            svg.appendChild(defs);

            // Progress circle
            const circle = document.createElementNS(ns, 'circle');
            circle.setAttribute('cx', '60');
            circle.setAttribute('cy', '60');
            circle.setAttribute('r', radius);
            circle.setAttribute('fill', 'none');
            circle.setAttribute('stroke', `url(#gradient-${svgId})`);
            circle.setAttribute('stroke-width', '10');
            circle.setAttribute('stroke-linecap', 'round');
            circle.setAttribute('stroke-dasharray', circumference);
            circle.setAttribute('stroke-dashoffset', offset);
            circle.setAttribute('transform', 'rotate(-90 60 60)');
            svg.appendChild(circle);

            // Center text
            const text = document.createElementNS(ns, 'text');
            text.setAttribute('x', '60');
            text.setAttribute('y', '65');
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('fill', '#f8fafc');
            text.setAttribute('font-size', '20');
            text.setAttribute('font-weight', 'bold');
            text.textContent = value + '%';
            svg.appendChild(text);
        }

        // Update counters
        function updateCounters() {
            const totalThroughput = services.reduce((sum, s) => sum + s.throughput, 0);
            document.getElementById('totalRequests').textContent = (totalThroughput / 1000).toFixed(1) + 'K';
            
            // Simulate random updates
            const newSuccessRate = (98 + Math.random() * 2).toFixed(1);
            document.getElementById('successRate').textContent = newSuccessRate + '%';
            
            const newLatency = Math.floor(40 + Math.random() * 20);
            document.getElementById('avgLatency').textContent = newLatency + 'ms';
            
            const newErrors = Math.floor(90 + Math.random() * 30);
            document.getElementById('totalErrors').textContent = newErrors;

            // Update health score
            const healthScore = Math.floor(92 + Math.random() * 8);
            document.getElementById('healthScore').textContent = healthScore;
            document.getElementById('healthText').textContent = healthScore > 95 ? 'Excellent' : healthScore > 90 ? 'Good' : 'Fair';

            // Update gauges
            const cpuUsage = Math.floor(60 + Math.random() * 20);
            const memoryUsage = Math.floor(65 + Math.random() * 15);
            drawCircularGauge('cpuGauge', cpuUsage, '#3b82f6', '#a855f7');
            drawCircularGauge('memoryGauge', memoryUsage, '#10b981', '#06b6d4');
            document.getElementById('cpuValue').textContent = cpuUsage + '%';
            document.getElementById('memoryValue').textContent = memoryUsage + '%';
        }

        // Initialize
        populateServicesGrid();
        populateAlerts();
        drawThroughputChart();
        drawDonutChart();
        drawBarChart();
        drawAreaChart();
        updateCounters();

        // Update periodically
        setInterval(() => {
            drawThroughputChart();
            drawAreaChart();
            updateCounters();
        }, 3000);
    </script>
</body>
</html>
